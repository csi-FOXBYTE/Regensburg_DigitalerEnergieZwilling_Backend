@startuml
left to right direction
skinparam rectangle {
  BackgroundColor #F7F7F7
  BorderColor #444444
}

title Offline-Datenpipeline

rectangle "LOD2 Daten\n(CityGML)" as lod2
rectangle "Solarpotenziale\n(CityGML)" as solar
rectangle "Geothermiepotenziale\n(WMS)" as geo

rectangle "Externer Datendienst\n(S3-kompatibel)" as s3
rectangle "Civitas Core\n(Airflow Orchestrator)" as airflow
rectangle "Konvertierungs-Container\nCityGML â†’ CityJSON\nCityJSON â†’ 3D Tiles" as convert
rectangle "Anreicherungs-Container\nSolar-/Geothermiepotenziale\n+ optionale Kennwerte" as enrich

rectangle "Tiles Gateway" as gw
rectangle "Public Client" as client

lod2 --> s3
solar --> s3
geo --> s3

airflow ..> convert : orchestriert
airflow ..> enrich : orchestriert
s3 --> convert : Download
convert --> s3 : Upload
s3 --> enrich : Download
enrich --> s3 : Upload

s3 --> gw
gw --> client

@enduml
